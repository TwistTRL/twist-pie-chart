(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(t,a,e){t.exports=e(18)},17:function(t,a,e){},18:function(t,a,e){"use strict";e.r(a);var i=e(7),n=e(1),o=e(2),r=e(5),s=e(4),l=e(3),h=e(6),p=e(0),c=e.n(p),u=e(10),C=e.n(u),d=e(8),v=(e(17),function(t){function a(t){var e;Object(n.a)(this,a),(e=Object(r.a)(this,Object(s.a)(a).call(this,t))).drawPieChart=function(t,a){var i,n,o,r,s,l,h,p,c,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",C=arguments.length>3&&void 0!==arguments[3]&&arguments[3],d=0,v=0,g=e.pieChartCanvasW/2,f=e.pieChartCanvasH/2+30,T="ERROR",m="",y=0;if(t){t.canvas.width=t.canvas.width,t.clearRect(0,0,e.pieChartCanvasW,e.pieChartCanvasH);for(var D=0;D<e.aggData.length;D++)if(i=C?e.pieChartCanvasW/4+10:e.pieChartCanvasW/4,T=e.aggData[D].type,d=v,l=((v+=e.aggData[D].rad)+d)/2,n=g+.6*i*(h=Math.cos(l)),o=f+.6*i*(p=Math.sin(l)),m=a[D],C?(r=0,s=0):m===u?(r=10*h,s=10*p):(r=2*h,s=2*p),(c=e.roundDegToMultiOfTen(e.toDegree(l)))<=y+5?c=y+=6:y=c,t.beginPath(),t.fillStyle=m,t.moveTo(g+r,f+s),t.arc(g+r,f+s,i,d,v),t.lineTo(g+r,f+s),t.strokeStyle=m,t.fill(),t.textAlign="center",t.textBaseline="top",t.font=u!==m?"bold 10pt MuseoSans":"900 10pt MuseoSans",t.fillStyle=C?m:"#1f589d",e.aggData[D].percent>.15)C||t.fillText(T,n,o);else{var b=Math.cos(e.toRadians(c)),k=Math.sin(e.toRadians(c)),S=C?i-=10:i,E=g+.8*S*b+S/2*b,x=f+.9*S*k+S/2*k;if(C){var P=t.measureText(T).width,M=parseInt(t.font.match(/\d+/),11);c>=90&&c<180?t.rect(E-P,x,P,12):c>=180&&c<270?t.rect(E-P,x-M-2,P,12):c>=270?t.rect(E,x-M-2,P,12):t.rect(E,x,P,12),t.fillStyle=m[D],t.fill()}else e.aggData[D].percent>.15&&t.fillText(T,n,o),n=g+.9*i*h,o=f+.9*i*p,t.lineWidth=u===m[D]?2:1.3,t.beginPath(),t.moveTo(n,o),t.lineTo(n+i/5*h,o+i/5*p),c>=90&&c<180?(t.textAlign="right",t.textBaseline="top"):c>=180&&c<270?(t.textAlign="right",t.textBaseline="bottom"):c>=270?(t.textAlign="left",t.textBaseline="bottom"):(t.textAlign="left",t.textBaseline="top"),t.lineTo(E,x),t.stroke(),t.fillText(T,E,x)}}},e.roundRadUp=function(t){if(t<.1)return.1;if(t>=6.2)return 0;var a=t+=.1;return parseFloat(a.toFixed(1))},e.roundDegToMultiOfTen=function(t){return t<10?10:t>=350?360:Number(String(t).slice(0,-1)+0)},e.toDegree=function(t){return t*(180/Math.PI)},e.toRadians=function(t){return t*(Math.PI/180)},e.findPos=function(t){var a=0,e=0;if(t.offsetParent){do{a+=t.offsetLeft,e+=t.offsetTop}while(t=t.offsetParent);return{x:a,y:e}}},e.rgbToHex=function(t,a,e){if(t>255||a>255||e>255)throw"Invalid color component";return(t<<16|a<<8|e).toString(16).toUpperCase()},e.hexToRgb=function(t){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},e.digToRgbStr=function(t){return"rgb(0,0,"+t*e.pieChartPickingColorOffSet+")"},e.randomRgba=function(){var t=Math.round,a=Math.random;return"rgba("+t(255*a())+","+t(255*a())+","+t(255*a())+","+a().toFixed(1)+")"},e.handleMouseMove=function(t){var a=e.findPos(e.pieChartCanvas),i=t.pageX-a.x,n=t.pageY-a.y,o=e.pieChartPickingCtx.getImageData(i,n,1,1).data,r=o[2]/e.pieChartPickingColorOffSet-1,s=[];e.aggData.map(function(t){s.push(e.props.dataTypeToColorDict[t.type])}),e.drawPieChart(e.pieChartCtx,s,s[r]),console.log(o,r,e.pieChartPickingColors),0!==o[2]&&255===o[3]?e.setState({toolTipLeft:t.clientX-75,toolTipTop:t.clientY+15,canvasToolTipVisibility:"visible",currentHovering:e.aggData[r]}):e.setState(Object(d.a)({},e.state,{canvasToolTipVisibility:"hidden"})),e.state.currentHovering!==e.aggData[r]&&e.drawBreakDownBars()},e.handleMouseOut=function(){e.setState(Object(d.a)({},e.state,{canvasToolTipVisibility:"hidden"}))},e.data=e.props.data,e.title=e.props.title,e.typeToColorDict=e.props.dataTypeToColorDict,e.pieChartCtx=null,e.pieChartPickingCtx=null,e.pieChartCanvasW=350,e.pieChartCanvasH=400,e.pieChartToolTipW=150,e.pieChartToolTipH=190,e.pieChartToolTipOffsetY=60,e.state={canvasToolTipVisibility:"hidden",toolTipLeft:e.pieChartCanvasW-e.pieChartToolTipW,toolTipTop:e.pieChartCanvasH-e.pieChartToolTipH+e.pieChartToolTipOffsetY},e.colorToDataTypeDict={},e.pieChartColors=[],e.pieChartPickingColors=[],e.pieChartPickingColorOffSet=7;for(var i=1;i<=e.data.length;i++)e.pieChartPickingColors.push(e.digToRgbStr(i));return e}return Object(h.a)(a,t),Object(o.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.pieChartCanvas=this.refs.canvas,this.pieChartPickingCanvas=this.refs.pieChartPickingCanvas,this.tooltipCanvas=this.refs.tooltipCanvas,this.pieChartCtx=this.pieChartCanvas.getContext("2d"),this.pieChartPickingCtx=this.pieChartPickingCanvas.getContext("2d"),this.aggData=this.aggTheData(this.data),this.pieChartPickingColors=[];for(var a=1;a<=this.aggData.length;a++)this.pieChartPickingColors.push(this.digToRgbStr(a));var e=[];this.aggData.map(function(a){e.push(t.props.dataTypeToColorDict[a.type])}),this.drawPieChart(this.pieChartCtx,e),this.drawPieChart(this.pieChartPickingCtx,this.pieChartPickingColors," ",!0)}},{key:"componentDidUpdate",value:function(){var t=this;this.data=this.props.data,this.title=this.props.title,this.typeToColorDict=this.props.dataTypeToColorDict,this.aggData=this.aggTheData(this.data),this.pieChartPickingColors=[];for(var a=1;a<=this.aggData.length;a++)this.pieChartPickingColors.push(this.digToRgbStr(a));var e=[];this.aggData.map(function(a){e.push(t.props.dataTypeToColorDict[a.type])}),"hidden"===this.state.canvasToolTipVisibility&&(this.drawPieChart(this.pieChartCtx,e),this.drawPieChart(this.pieChartPickingCtx,this.pieChartPickingColors," ",!0))}},{key:"aggTheData",value:function(t){var a=this,e=[],i={},n=0;return this.pieChartColors=[],t.map(function(t){n+=t.value,i[t.type]?i[t.type]={value:i[t.type].value+=t.value}:i[t.type]={value:t.value}}),Object.keys(i).map(function(t,o){var r=i[t];a.pieChartColors.push(a.typeToColorDict[t]),r.percent=r.value/n,r.rad=2*r.percent*Math.PI,r.type=t,a.colorToDataTypeDict[a.pieChartColors[o]]=r,e[o]=r}),e.sort(function(t,a){return t.rad-a.rad}),e}},{key:"drawBreakDownBars",value:function(){for(var t={peach:this.randomRgba(),peach1:this.randomRgba(),orange:this.randomRgba(),cyan:this.randomRgba(),red:this.randomRgba()},a=new Set([0,1]),e=new Set([2,3,4,5,6]),i=0,n=10,o=this.tooltipCanvas.getContext("2d"),r=0;r<10;r++){var s=void 0;o.moveTo(0,i),o.moveTo(0,n),s=e.has(r)?t.orange:a.has(r)?t.red:t.cyan,o.fillStyle=s,o.fillRect(20,n,20,10),o.fillStyle="black",o.fillText("TEST",50,n+10),i=n,n+=10}}},{key:"render",value:function(){var t={pickingCanvas:{display:"none"},tooltipContainer:{width:this.pieChartToolTipW,height:this.pieChartToolTipH,left:this.state.toolTipLeft,top:this.state.toolTipTop,visibility:this.state.canvasToolTipVisibility,zIndex:9999}};return c.a.createElement("div",{className:"pie-chart-container"},c.a.createElement("div",{className:"pie-chart-title"},c.a.createElement("span",null,this.title+" "+this.dataSum," "),c.a.createElement("span",{className:"pie-chart-title-measurements"},"mL/kg/day")),c.a.createElement("canvas",{style:t.pickingCanvas,className:"pie-chart-picking-canvas",ref:"pieChartPickingCanvas",width:this.pieChartCanvasW,height:this.pieChartCanvasH}),c.a.createElement("canvas",{className:"pie-chart-canvas",ref:"canvas",width:this.pieChartCanvasW,height:this.pieChartCanvasH,onMouseMove:this.handleMouseMove,onMouseOut:this.handleMouseOut}),c.a.createElement("div",{className:"pie-chart-tooltip-container",style:t.tooltipContainer},c.a.createElement("span",{className:"pie-chart-tooltip-title"},this.state.currentHovering?this.state.currentHovering.type:""),c.a.createElement("br",null),c.a.createElement("span",{className:"pie-chart-tooltip-percent"},this.state.currentHovering?Math.round(100*this.state.currentHovering.percent.toFixed(2))+"% ":""),c.a.createElement("span",{className:"pie-chart-tooltip-details"},"of total"),c.a.createElement("canvas",{className:"pie-chart-tooltip-canvas",ref:"tooltipCanvas"})))}}]),a}(p.PureComponent)),g=function(t){function a(t){var e;return Object(n.a)(this,a),(e=Object(r.a)(this,Object(s.a)(a).call(this,t))).handleSubmit=function(t){t&&t.preventDefault();var a=e.data.value.replace(/(\w+:)|(\w+ :)/g,function(t){return'"'+t.substring(0,t.length-1)+'":'}),n=JSON.parse(a);e.state.data.push(n),e.setState({data:[].concat(Object(i.a)(e.state.data),[n])})},e.dataTypeToColorDict={MEDS:"#C2EEF8",FLUSHES:"#5DD2EF",TPN:"#84A5D5",FEEDS:"#A3DBDC",lol434ra:"#C13BDA",xbo4334x:"#613BFA"},e.state={data:[{value:1,type:"MEDS"},{value:1,type:"FLUSHES"},{value:20,type:"FEEDS"},{value:10,type:"FEEDS"},{value:1,type:"TPN"}]},e.meds=["MEDS","FLUSHES","FEEDS","TPN"],e.handleRemoveBtnCLick=e.handleRemoveBtnCLick.bind(Object(l.a)(e)),e}return Object(h.a)(a,t),Object(o.a)(a,[{key:"componentDidMount",value:function(){var t=this;setInterval(function(){t.simulateDataChange()},1e3)}},{key:"handleRemoveBtnCLick",value:function(){var t=this.state.data;t=t.slice(0,-1),this.setState({data:t})}},{key:"simulateDataChange",value:function(){var t=Math.floor(100*Math.random())+0,a=Math.floor(4*Math.random())+0;if(t%11===0){var e=this.state.data;e=e.slice(0,-1),this.setState({data:e})}else{var n={value:Math.floor(100*Math.random())+1,type:this.meds[a]};this.state.data.push(n),this.setState({data:[].concat(Object(i.a)(this.state.data),[n])})}}},{key:"render",value:function(){var t=this,a=this.state.data;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,"Pass in data in the form: ",' { value: 1, type: "MEDS" } '),c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("input",{style:{height:"50px",width:"50%",fontSize:"14pt"},placeholder:"data",type:"text",ref:function(a){t.data=a}}),c.a.createElement("button",null,"ADD DATA")),c.a.createElement("button",{onClick:this.handleRemoveBtnCLick},"REMOVE DATA"),c.a.createElement(v,{data:a,dataTypeToColorDict:this.dataTypeToColorDict,title:"Calories"}))}}]),a}(p.Component);C.a.render(c.a.createElement(g,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.2162da2c.chunk.js.map